<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>事件 - Simditor</title>
    <meta name="viewport" content="width=device-width,initial-scale=1.0">

    <link rel="shortcut icon" href="../favicon.ico" type="image/x-icon" />
    <link rel="icon" href="../favicon.ico" sizes="32x32" />
    <link rel="icon" href="../favicon.ico" sizes="64x64" />
    <link rel="icon" href="../favicon.ico" sizes="128x128" />

    <link media="all" rel="stylesheet" type="text/css" href="../assets/styles/app.css" />
    <link media="all" rel="stylesheet" type="text/css" href="../assets/styles/font-awesome.css" />
    <link media="all" rel="stylesheet" type="text/css" href="../assets/styles/simditor.css" />

    <script type="text/javascript" src="../assets/scripts/jquery.min.js"></script>
    <script type="text/javascript" src="../assets/scripts/mobilecheck.js"></script>
    <script type="text/javascript">
        if(mobilecheck()){
            $('<link/>', {
                media: 'all',
                rel: 'stylesheet',
                type: 'text/css',
                href: '../assets/styles/mobile.css'
            }).appendTo('head')
        }
    </script>
</head>
<body>

<div class="wrapper">
    
<header>
	<h1><a href="../.">Simditor</a></h1>
	<p class="desc">简单快速的富文本编辑器</p>
</header>
<nav>
	<a href="../.">Demo</a>
	<a href="../tours/tour-usage.html">教程</a>
	<a href="../docs/doc-config.html" class="active">文档</a>
	<a href="../extension.html">扩展</a>
	<a href="../download.html">下载</a>
</nav>

    <section class="page-doc page-sidebar" id="page-doc-event">
	<aside>
	<ul>
		<li>
			<i class="icon fa fa-caret-right"></i>
			<a href="../docs/doc-config.html">配置</a>
		</li>
		<li>
			<i class="icon fa fa-caret-right"></i>
			<a href="../docs/doc-method.html">方法</a>
		</li>
		<li class="active">
			<i class="icon fa fa-caret-right"></i>
			<a href="../docs/doc-event.html">事件</a>
		</li>
		<li>
			<i class="icon fa fa-caret-right"></i>
			<a href="../docs/doc-button.html">Button</a>
		</li>
	</ul>
</aside>



	<article class="editor-style">
		<p>Simditor 会在特定情况下触发下列事件，你可以为编辑器实例绑定这些事件来做相应的操作：</p>
<div class="highlight"><pre><code class="coffee language-coffee" data-lang="coffee"><span class="c1"># 初始化 Simditor</span>
<span class="nv">editor = </span><span class="k">new</span> <span class="nx">Simditor</span>
  <span class="nv">textarea: </span><span class="nx">$</span><span class="p">(</span><span class="s">&#39;#editor&#39;</span><span class="p">)</span>

<span class="c1"># 绑定 valuechanged 方法</span>
<span class="nx">editor</span><span class="p">.</span><span class="nx">on</span> <span class="s">&#39;valuechanged&#39;</span><span class="p">,</span> <span class="nf">(e, src) -&gt;</span>
  <span class="nx">alert</span><span class="p">(</span><span class="s">&#39;simditor valuechanged&#39;</span><span class="p">)</span>
</code></pre></div>
<h3>事件</h3>

<dl class="doc-events">
  
    <dt id="anchor-valuechanged">
      <!--<span class="icon fa fa-caret-down"></span>-->
      <span class="name">valuechanged</span>
      <span class="params">
        
          <span class="param">
            <span class="param-name">e</span>
            <span class="param-type">jQuery Event</span>
          </span>
        
      </span>
    </dt>
    <dd class="expand">
      <p><strong>触发条件：编辑器内容发生改变</strong></p>

    </dd>
  
    <dt id="anchor-selectionchanged">
      <!--<span class="icon fa fa-caret-down"></span>-->
      <span class="name">selectionchanged</span>
      <span class="params">
        
          <span class="param">
            <span class="param-name">e</span>
            <span class="param-type">jQuery Event</span>
          </span>
        
      </span>
    </dt>
    <dd class="expand">
      <p><strong>触发条件：当光标位置或者选择的文本区域发生变化</strong></p>

    </dd>
  
    <dt id="anchor-decorate">
      <!--<span class="icon fa fa-caret-down"></span>-->
      <span class="name">decorate</span>
      <span class="params">
        
          <span class="param">
            <span class="param-name">e</span>
            <span class="param-type">jQuery Event</span>
          </span>
        
          <span class="param">
            <span class="param-name">$el</span>
            <span class="param-type">jQuery Object</span>
          </span>
        
      </span>
    </dt>
    <dd class="expand">
      <p><strong>触发条件：当调用</strong> <a href="../docs/doc-method.html#anchor-setValue"><strong>setValue</strong></a> <strong>方法或粘贴内容的时候</strong></p>

<p>在扩展或者按钮中可能会在编辑的内容中插入一些比较复杂元素（比如表格），在编辑过程中，为了给用户呈现更友好的编辑体验，我们需要加入一些与内容无关的交互元素（我们称这个过程为「修饰」），这些起修饰作用的元素不应该成为内容的一部分，因此会在获取编辑器内容的时候被去掉。</p>

<p>例如，为了实现表格拖动调整列宽的功能，我们需要一些额外的 HTML 标签：</p>
<div class="highlight"><pre><code class="html language-html" data-lang="html"><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;simditor-table&quot;</span><span class="nt">&gt;</span> <span class="c">&lt;!-- 额外的标签 --&gt;</span>
  <span class="nt">&lt;table&gt;</span>...<span class="nt">&lt;/table&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;simditor-resize-handle&quot;</span> <span class="na">contenteditable=</span><span class="s">&quot;false&quot;</span><span class="nt">&gt;&lt;/div&gt;</span> <span class="c">&lt;!-- 额外的标签 --&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</code></pre></div>
<p>在插入表格的时候，编辑器会调用表格的 decorate 方法（创建额外的 HTML 标签），在获取编辑器内容的时候会通过 undecorate 事件调用表格的 undecorate 方法（去掉额外的 HTML 标签）。</p>
<div class="highlight"><pre><code class="coffee language-coffee" data-lang="coffee"><span class="k">class</span> <span class="nx">TableButton</span> <span class="k">extends</span> <span class="nx">Button</span>
  <span class="nv">constructor: </span><span class="nf">(@editor) -&gt;</span>
    <span class="p">...</span>

    <span class="nx">@editor</span><span class="p">.</span><span class="nx">on</span> <span class="s">&#39;decorate&#39;</span><span class="p">,</span> <span class="nf">(e, $el) =&gt;</span>
      <span class="nx">$el</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s">&#39;table&#39;</span><span class="p">).</span><span class="nx">each</span> <span class="nf">(i, table) =&gt;</span>
        <span class="nx">@decorate</span> <span class="nx">$</span><span class="p">(</span><span class="nx">table</span><span class="p">)</span>

    <span class="nx">@editor</span><span class="p">.</span><span class="nx">on</span> <span class="s">&#39;undecorate&#39;</span><span class="p">,</span> <span class="nf">(e, $el) =&gt;</span>
      <span class="nx">$el</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s">&#39;table&#39;</span><span class="p">).</span><span class="nx">each</span> <span class="nf">(i, table) =&gt;</span>
        <span class="nx">@undecorate</span> <span class="nx">$</span><span class="p">(</span><span class="nx">table</span><span class="p">)</span>

  <span class="p">...</span>

  <span class="nv">decorate: </span><span class="nf">($table) -&gt;</span>
    <span class="k">if</span> <span class="nx">$table</span><span class="p">.</span><span class="nx">parent</span><span class="p">(</span><span class="s">&#39;.simditor-table&#39;</span><span class="p">).</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span>
      <span class="nx">@undecorate</span> <span class="nx">$table</span>

    <span class="nx">$table</span><span class="p">.</span><span class="nx">wrap</span> <span class="s">&#39;&lt;div class=&quot;simditor-table&quot;&gt;&lt;/div&gt;&#39;</span>
    <span class="nx">@initResize</span> <span class="nx">$table</span>
    <span class="nx">$table</span><span class="p">.</span><span class="nx">parent</span><span class="p">()</span>

  <span class="nv">undecorate: </span><span class="nf">($table) -&gt;</span>
    <span class="k">return</span> <span class="k">unless</span> <span class="nx">$table</span><span class="p">.</span><span class="nx">parent</span><span class="p">(</span><span class="s">&#39;.simditor-table&#39;</span><span class="p">).</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span>
    <span class="nx">$table</span><span class="p">.</span><span class="nx">parent</span><span class="p">().</span><span class="nx">replaceWith</span><span class="p">(</span><span class="nx">$table</span><span class="p">)</span>
</code></pre></div>
    </dd>
  
    <dt id="anchor-undecorate">
      <!--<span class="icon fa fa-caret-down"></span>-->
      <span class="name">undecorate</span>
      <span class="params">
        
          <span class="param">
            <span class="param-name">e</span>
            <span class="param-type">jQuery Event</span>
          </span>
        
          <span class="param">
            <span class="param-name">$el</span>
            <span class="param-type">jQuery Object</span>
          </span>
        
      </span>
    </dt>
    <dd class="expand">
      <p><strong>触发条件：当调用</strong> <a href="../docs/doc-method.html#anchor-decorate"><strong>getValue</strong></a> 和 <a href="../docs/doc-method.html#anchor-sync"><strong>sync</strong></a> <strong>方法的时候</strong></p>

<p>参考 <a href="../docs/doc-event.html#anchor-decorate">decorate</a> 事件</p>

    </dd>
  
    <dt id="anchor-pasting">
      <!--<span class="icon fa fa-caret-down"></span>-->
      <span class="name">pasting</span>
      <span class="params">
        
          <span class="param">
            <span class="param-name">e</span>
            <span class="param-type">jQuery Event</span>
          </span>
        
          <span class="param">
            <span class="param-name">$pasteContent</span>
            <span class="param-type">jQuery Object</span>
          </span>
        
      </span>
    </dt>
    <dd class="expand">
      <p><strong>触发条件：粘贴内容到编辑器的时候</strong></p>

<p>参数<code>$pasteContent</code>是粘贴的内容，可以根据它来决定是否要中断粘贴，如果返回false，粘贴将不会生效</p>

<h6>示例</h6>
<div class="highlight"><pre><code class="js language-js" data-lang="js"><span class="c1">// 如果粘贴的内容含有图片则中断粘贴</span>
<span class="nx">editor</span><span class="p">.</span><span class="nx">on</span> <span class="s1">&#39;pasting&#39;</span><span class="p">,</span> <span class="p">(</span><span class="nx">e</span><span class="p">,</span> <span class="nx">$pasteContent</span><span class="p">)</span> <span class="o">-&gt;</span>
  <span class="k">if</span> <span class="nx">$pasteContent</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">&quot;img&quot;</span><span class="p">).</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span>
    <span class="k">return</span> <span class="kc">false</span>
</code></pre></div>
    </dd>
  
    <dt id="anchor-focus">
      <!--<span class="icon fa fa-caret-down"></span>-->
      <span class="name">focus</span>
      <span class="params">
        
          <span class="param">
            <span class="param-name">e</span>
            <span class="param-type">jQuery Event</span>
          </span>
        
      </span>
    </dt>
    <dd class="expand">
      <p><strong>触发条件：内容区域获得焦点的时候</strong></p>

    </dd>
  
    <dt id="anchor-blur">
      <!--<span class="icon fa fa-caret-down"></span>-->
      <span class="name">blur</span>
      <span class="params">
        
          <span class="param">
            <span class="param-name">e</span>
            <span class="param-type">jQuery Event</span>
          </span>
        
      </span>
    </dt>
    <dd class="expand">
      <p><strong>触发条件：内容区域失去焦点的时候</strong></p>

    </dd>
  
    <dt id="anchor-destroy">
      <!--<span class="icon fa fa-caret-down"></span>-->
      <span class="name">destroy</span>
      <span class="params">
        
          <span class="param">
            <span class="param-name">e</span>
            <span class="param-type">jQuery Event</span>
          </span>
        
      </span>
    </dt>
    <dd class="expand">
      <p><strong>触发条件：调用实例的 destroy 方法的时候</strong></p>

    </dd>
  
</dl>

	</article>
</section>

<script type="text/javascript" src="../assets/scripts/page-doc.js"></script>

    
<footer>
	&copy; <a href="http://tower.im">彩程设计</a>
</footer>


    <a href="https://github.com/mycolorway/simditor" id="link-fork">
        <img src="../assets/images/fork.png" alt="Fork me on GitHub" />
    </a>
</div>


</body>
</html>

