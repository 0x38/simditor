<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>编写按钮 - Simditor</title>
    <meta name="viewport" content="width=device-width,initial-scale=1.0">

    <link rel="shortcut icon" href="../favicon.ico" type="image/x-icon" />
    <link rel="icon" href="../favicon.ico" sizes="32x32" />
    <link rel="icon" href="../favicon.ico" sizes="64x64" />
    <link rel="icon" href="../favicon.ico" sizes="128x128" />

    <link media="all" rel="stylesheet" type="text/css" href="../assets/styles/app.css" />
    <link media="all" rel="stylesheet" type="text/css" href="../assets/styles/simditor.css" />

    <script type="text/javascript" src="../assets/scripts/jquery.min.js"></script>
    <script type="text/javascript" src="../assets/scripts/mobilecheck.js"></script>
    <script type="text/javascript">
        if(mobilecheck()){
            $('<link/>', {
                media: 'all',
                rel: 'stylesheet',
                type: 'text/css',
                href: '../assets/styles/mobile.css'
            }).appendTo('head')
        }
    </script>
</head>
<body>

<div class="wrapper">
    
<header>
	<h1><a href="../.">Simditor</a></h1>
	<p class="desc">简单快速的富文本编辑器</p>
</header>
<nav>
	<a href="../.">Demo</a>
	<a href="../tours/tour-usage.html" class="active">教程</a>
	<a href="../docs/doc-config.html">文档</a>
	<a href="../extension.html">扩展</a>
	<a href="https://github.com/mycolorway/simditor/releases" target="_blank">下载</a>
</nav>

    <section class="page-tour page-sidebar" id="page-tour-button">
	<aside>
	<ul>
		<li>
			<i class="icon simditor-icon simditor-icon-caret-right"></i>
			<a href="../tours/tour-usage.html">使用方法</a>
		</li>
		<li>
			<i class="icon simditor-icon simditor-icon-caret-right"></i>
			<a href="../tours/tour-dev-env.html">搭建环境</a>
		</li>
		<li>
			<i class="icon simditor-icon simditor-icon-caret-right"></i>
			<a href="../tours/tour-plugin.html">编写扩展</a>
		</li>
		<li class="active">
			<i class="icon simditor-icon simditor-icon-caret-right"></i>
			<a href="../tours/tour-button.html">编写按钮</a>
		</li>
	</ul>
</aside>


	<article class="editor-style">
		<p>这篇教程主要介绍如何给 Simditor 编写一个 undo 按钮，点击 undo 按钮编辑器的内容会回退到上一个状态。</p>

<h3>基本结构</h3>

<p>创建文件 <code>simditor-undo.coffee</code>，输入 Simditor 按钮的基本结构：</p>
<div class="highlight"><pre><code class="language-coffee" data-lang="coffee"><span class="k">class</span> <span class="nx">UndoButton</span> <span class="k">extends</span> <span class="nx">Simditor</span><span class="p">.</span><span class="nx">Button</span>

  <span class="nv">name: </span><span class="s">&#39;undo&#39;</span>

  <span class="nv">icon: </span><span class="s">&#39;undo&#39;</span>

  <span class="nv">title: </span><span class="s">&#39;回退&#39;</span>

<span class="nx">Simditor</span><span class="p">.</span><span class="nx">Toolbar</span><span class="p">.</span><span class="nx">addButton</span> <span class="nx">UndoButton</span>
</code></pre></div>
<p>Simditor 的按钮都继承自 <a href="https://github.com/mycolorway/simditor/blob/master/src/buttons/button.coffee">Button 类</a>，跟扩展类似 Simditor 也提供一个方法用来添加按钮：<code>Simditor.Toolbar.addButton()</code>。</p>

<p>Button 类有这些可以设置的属性：</p>

<ul>
<li><code>name</code> 按钮的名称，用于识别按钮，构造按钮的 class <code>toolbar-item-[name]</code>；</li>
<li><code>icon</code> 按钮icon的名称，对应fonticon的class名称 <code>icon-[icon]</code>；</li>
<li><code>title</code> 按钮的title，鼠标悬停会显示的提示文本；</li>
<li><code>htmlTag</code> 按钮对应的 html 标签名称，用于识别按钮的激活状态（例如加粗按钮）；</li>
<li><code>disableTag</code> 在指定的 html 标签中禁用按钮（例如在代码标签中禁用链接按钮）；</li>
<li><code>needFocus</code> 按钮的功能是否依赖编辑器处于 focus 状态。</li>
</ul>

<p>更多关于 Button 类的说明请参考文档 <a href="../docs/doc-button.html">Button</a>。</p>

<h3>按钮点击事件</h3>

<p>按钮被点击之后，Simditor 会调用 Button 的 <code>command</code> 方法，我们需要在这个方法里处理按钮的点击事件：</p>
<div class="highlight"><pre><code class="language-coffee" data-lang="coffee"><span class="k">class</span> <span class="nx">UndoButton</span> <span class="k">extends</span> <span class="nx">Simditor</span><span class="p">.</span><span class="nx">Button</span>

  <span class="nv">name: </span><span class="s">&#39;undo&#39;</span>

  <span class="nv">icon: </span><span class="s">&#39;undo&#39;</span>

  <span class="nv">title: </span><span class="s">&#39;回退&#39;</span>

  <span class="nv">command: </span><span class="nf">-&gt;</span>
    <span class="nx">@editor</span><span class="p">.</span><span class="nx">undoManager</span><span class="p">.</span><span class="nx">undo</span><span class="p">()</span>

<span class="nx">Simditor</span><span class="p">.</span><span class="nx">Toolbar</span><span class="p">.</span><span class="nx">addButton</span> <span class="nx">UndoButton</span>
</code></pre></div>
<h3>引用并配置按钮</h3>

<p>为了在工具栏上显示 undo 按钮，我们需要编译并引用新编写的按钮文件：</p>
<div class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span> <span class="na">src=</span><span class="s">&quot;[script path]/jquery.min.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span> <span class="na">src=</span><span class="s">&quot;[script path]/module.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span> <span class="na">src=</span><span class="s">&quot;[script path]/simditor.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span> <span class="na">src=</span><span class="s">&quot;[script path]/simditor-undo.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
</code></pre></div>
<p>然后修改编辑器的 <code>toolbar</code> 配置：</p>
<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="kd">var</span> <span class="nx">editor</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Simditor</span><span class="p">({</span>
  <span class="nx">textarea</span><span class="o">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#editor&#39;</span><span class="p">),</span>
  <span class="nx">toolbar</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;bold&#39;</span><span class="p">,</span> <span class="s1">&#39;italic&#39;</span><span class="p">,</span> <span class="s1">&#39;underline&#39;</span><span class="p">,</span> <span class="s1">&#39;strikethrough&#39;</span><span class="p">,</span> <span class="s1">&#39;undo&#39;</span><span class="p">]</span>
<span class="p">});</span>
</code></pre></div>
<p>Simditor 默认支持的按钮有：bold, italic, underline, strikethrough, ol, ul, blockquote, code, link, image, indent, outdent。</p>

	</article>
</section>






    
<footer>
	&copy; <a href="http://tower.im">彩程设计</a>
</footer>


    <a href="https://github.com/mycolorway/simditor" id="link-fork">
        <img src="../assets/images/fork.png" alt="Fork me on GitHub" />
    </a>
</div>


</body>
</html>

